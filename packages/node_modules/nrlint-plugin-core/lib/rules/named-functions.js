/**
 * check an existence of name of a function node
 * @param {FlowSet} afs complete flow set
 * @param {*} conf configuration for this rule. {name: "no-func-name", severity: "warn" }
 * @param {*} cxt context
 */
function checkNoFuncName(afs, conf, cxt) {
    var funcs = afs.getAllNodesArray()
        .filter( (e) => {return e.type==='function';})
        .map(function (e) {
            return {id:e.id, name:e.name};
        });
    funcs
        .filter(function (e) {return e.name === undefined || e.name === "";})
        .forEach(function (e) {
            cxt.report({
                location: [e.id],
                message: "Function node has no name"
            })
        });
}
module.exports = {
    meta: {
        type: "suggestion",
        severity: "warn",
        docs: {
            description: "ensure all Function nodes have a name"
        },
        schema: []
    },
    check: checkNoFuncName
};
